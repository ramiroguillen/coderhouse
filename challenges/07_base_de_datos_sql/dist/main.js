(()=>{"use strict";var t={830:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=new class{constructor(t){this.items=t}createNew(t){return t.id=this.items.length?this.items.length+1:1,t.timestamp=new Date,this.items.push(t),t.id}getById(t){return this.items.find((e=>e.id===parseInt(t)))}getCartProducts(t){const e=this.items.find((e=>e.id===parseInt(t)));if(e)return e.products}addItem(t,e){const i=this.items.find((e=>e.id===parseInt(t)));if(i){const t=this.items.indexOf(i);return this.items[t].products.push(e),e.id}}deleteProductFromCart(t,e){const i=this.items.find((e=>e.id===parseInt(t)));if(i){const t=this.items.indexOf(i),s=this.items[t].products.filter((t=>t.id!==parseInt(e)));return this.items[t].products=s,{message:"item deleted"}}}deleteById(t){const e=this.items.filter((e=>e.id!==parseInt(t)));return this.items=e,{message:"item deleted"}}}([]);e.default=i},936:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=new class{constructor(t){this.items=t}getById(t){return this.items.find((e=>e.id===parseInt(t)))}createNew(t){return t.id=this.items.length?this.items.length+1:1,t.timestamp=new Date,this.items.push(t),t.id}updateById(t,e){const i=this.items.find((e=>e.id===parseInt(t)));if(i){const t=this.items.indexOf(i);return i.name=e.name?e.name:i.name,i.description=e.description?e.description:i.description,i.code=e.code?e.code:i.code,i.thumbnail=e.thumbnail?e.thumbnail:i.thumbnail,i.price=e.price?e.price:i.price,i.stock=e.stock?e.stock:i.stock,i.timestamp=new Date,this.items[t]=i,this.items[t]}}deleteById(t){const e=this.items.filter((e=>e.id!==parseInt(t)));return this.items=e,{message:"item deleted"}}}([]);e.default=i},607:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const d=s(i(142)),n=s(i(860)),r=s(i(479));d.default.config();const o=process.env.PORT||8080,u=(0,n.default)();u.use(n.default.json()),u.use(n.default.urlencoded({extended:!0})),u.use(n.default.static("public")),u.use("/api",r.default),u.listen(o,(()=>console.log(`SERVER: ${o}`))).on("error",(t=>console.log(`SERVER ERROR: ${t}`)))},562:function(t,e){var i=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(d,n){function r(t){try{u(s.next(t))}catch(t){n(t)}}function o(t){try{u(s.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?d(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}u((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,s){return i(this,void 0,void 0,(function*(){s()}))}},693:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.findCartById=e.findProductById=void 0;const d=s(i(936)),n=s(i(830));e.findProductById=function(t,e,i){d.default.items.find((e=>e.id===parseInt(t.params.id)))?i():e.json({error:"item not found"})},e.findCartById=function(t,e,i){n.default.items.find((e=>e.id===parseInt(t.params.id)))?i():e.json({error:"item not found"})}},747:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const d=i(860),n=s(i(830)),r=i(693),o=(0,d.Router)();o.post("/",((t,e)=>{e.json(n.default.createNew(t.body))})),o.delete("/:id",r.findCartById,((t,e)=>{e.json(n.default.deleteById(t.params.id))})),o.get("/:id/products",r.findCartById,((t,e)=>{e.json(n.default.getCartProducts(t.params.id))})),o.post("/:id/products",r.findCartById,((t,e)=>{e.json(n.default.addItem(t.params.id,t.body))})),o.delete("/:id/products/:id_prod",r.findCartById,((t,e)=>{e.json(n.default.deleteProductFromCart(t.params.id,t.params.id_prod))})),e.default=o},479:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const d=i(860),n=s(i(667)),r=s(i(747)),o=(0,d.Router)();o.use("/products",n.default),o.use("/carts",r.default),e.default=o},667:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const d=i(860),n=s(i(562)),r=i(693),o=s(i(936)),u=(0,d.Router)();u.get("/:id",r.findProductById,((t,e)=>{e.json(o.default.getById(t.params.id))})),u.post("/",n.default,((t,e)=>{e.json(o.default.createNew(t.body))})),u.put("/:id",n.default,r.findProductById,((t,e)=>{e.json(o.default.updateById(t.params.id,t.body))})),u.delete("/:id",n.default,r.findProductById,((t,e)=>{e.json(o.default.deleteById(t.params.id))})),e.default=u},142:t=>{t.exports=require("dotenv")},860:t=>{t.exports=require("express")}},e={};!function i(s){var d=e[s];if(void 0!==d)return d.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,i),n.exports}(607)})();